0000              1   ;--------------------------------------------------------
0000              2   ; File Created by C51
0000              3   ; Version 1.0.0 #1069 (Apr 23 2015) (MSVC)
0000              4   ; This file was generated Tue Jul 17 08:44:56 2018
0000              5   ;--------------------------------------------------------
                  5   $name LTC2308_test
                  6   $optc51 --model-small
                  7   $printf_float
0000              9            R_DSEG    segment data
0000             10            R_CSEG    segment code
0000             11            R_BSEG    segment bit
0000             12            R_XSEG    segment xdata
0000             13            R_PSEG    segment xdata
0000             14            R_ISEG    segment idata
0000             15            R_OSEG    segment data overlay
0000             16            BIT_BANK  segment data overlay
0000             17            R_HOME    segment code
0000             18            R_GSINIT  segment code
0000             19            R_IXSEG   segment xdata
0000             20            R_CONST   segment code
0000             21            R_XINIT   segment code
0000             22            R_DINIT   segment code
0000             23   
0000             24   ;--------------------------------------------------------
0000             25   ; Public variables in this module
0000             26   ;--------------------------------------------------------
0000             27            public _SevenSeg
0000             28            public _main
0000             29            public _MyDelay
0000             30            public _Wait1ms
0000             31            public _DisplayFloat
0000             32            public _LTC2308RW
0000             33            public __c51_external_startup
0000             34            public _de2_8052_crt0
0000             35   ;--------------------------------------------------------
0000             36   ; Special Function Registers
0000             37   ;--------------------------------------------------------
0000             38   _P0             DATA 0x80
0000             39   _SP             DATA 0x81
0000             40   _DPL            DATA 0x82
0000             41   _DPH            DATA 0x83
0000             42   _PCON           DATA 0x87
0000             43   _TCON           DATA 0x88
0000             44   _TMOD           DATA 0x89
0000             45   _TL0            DATA 0x8a
0000             46   _TL1            DATA 0x8b
0000             47   _TH0            DATA 0x8c
0000             48   _TH1            DATA 0x8d
0000             49   _P1             DATA 0x90
0000             50   _SCON           DATA 0x98
0000             51   _SBUF           DATA 0x99
0000             52   _P2             DATA 0xa0
0000             53   _IE             DATA 0xa8
0000             54   _P3             DATA 0xb0
0000             55   _IP             DATA 0xb8
0000             56   _PSW            DATA 0xd0
0000             57   _ACC            DATA 0xe0
0000             58   _B              DATA 0xf0
0000             59   _T2CON          DATA 0xc8
0000             60   _RCAP2L         DATA 0xca
0000             61   _RCAP2H         DATA 0xcb
0000             62   _TL2            DATA 0xcc
0000             63   _TH2            DATA 0xcd
0000             64   _DPS            DATA 0x86
0000             65   _DPH1           DATA 0x85
0000             66   _DPL1           DATA 0x84
0000             67   _HEX0           DATA 0x91
0000             68   _HEX1           DATA 0x92
0000             69   _HEX2           DATA 0x93
0000             70   _HEX3           DATA 0x94
0000             71   _HEX4           DATA 0x8e
0000             72   _HEX5           DATA 0x8f
0000             73   _LEDRA          DATA 0xe8
0000             74   _LEDRB          DATA 0x95
0000             75   _SWA            DATA 0xe8
0000             76   _SWB            DATA 0x95
0000             77   _KEY            DATA 0xf8
0000             78   _P0MOD          DATA 0x9a
0000             79   _P1MOD          DATA 0x9b
0000             80   _P2MOD          DATA 0x9c
0000             81   _P3MOD          DATA 0x9d
0000             82   _LCD_CMD        DATA 0xd8
0000             83   _LCD_DATA       DATA 0xd9
0000             84   _LCD_MOD        DATA 0xda
0000             85   _JCMD           DATA 0xc0
0000             86   _JBUF           DATA 0xc1
0000             87   _JCNT           DATA 0xc2
0000             88   _REP_ADD_L      DATA 0xf1
0000             89   _REP_ADD_H      DATA 0xf2
0000             90   _REP_VALUE      DATA 0xf3
0000             91   _DEBUG_CALL_L   DATA 0xfa
0000             92   _DEBUG_CALL_H   DATA 0xfb
0000             93   _BPC            DATA 0xfc
0000             94   _BPS            DATA 0xfd
0000             95   _BPAL           DATA 0xfe
0000             96   _BPAH           DATA 0xff
0000             97   _LBPAL          DATA 0xfa
0000             98   _LBPAH          DATA 0xfb
0000             99   _XRAMUSEDAS     DATA 0xc3
0000            100   _FLASH_CMD      DATA 0xdb
0000            101   _FLASH_DATA     DATA 0xdc
0000            102   _FLASH_MOD      DATA 0xdd
0000            103   _FLASH_ADD0     DATA 0xe1
0000            104   _FLASH_ADD1     DATA 0xe2
0000            105   _FLASH_ADD2     DATA 0xe3
0000            106   ;--------------------------------------------------------
0000            107   ; special function bits
0000            108   ;--------------------------------------------------------
0000            109   _P0_0           BIT 0x80
0000            110   _P0_1           BIT 0x81
0000            111   _P0_2           BIT 0x82
0000            112   _P0_3           BIT 0x83
0000            113   _P0_4           BIT 0x84
0000            114   _P0_5           BIT 0x85
0000            115   _P0_6           BIT 0x86
0000            116   _P0_7           BIT 0x87
0000            117   _IT0            BIT 0x88
0000            118   _IE0            BIT 0x89
0000            119   _IT1            BIT 0x8a
0000            120   _IE1            BIT 0x8b
0000            121   _TR0            BIT 0x8c
0000            122   _TF0            BIT 0x8d
0000            123   _TR1            BIT 0x8e
0000            124   _TF1            BIT 0x8f
0000            125   _P1_0           BIT 0x90
0000            126   _P1_1           BIT 0x91
0000            127   _P1_2           BIT 0x92
0000            128   _P1_3           BIT 0x93
0000            129   _P1_4           BIT 0x94
0000            130   _P1_5           BIT 0x95
0000            131   _P1_6           BIT 0x96
0000            132   _P1_7           BIT 0x97
0000            133   _RI             BIT 0x98
0000            134   _TI             BIT 0x99
0000            135   _RB8            BIT 0x9a
0000            136   _TB8            BIT 0x9b
0000            137   _REN            BIT 0x9c
0000            138   _SM2            BIT 0x9d
0000            139   _SM1            BIT 0x9e
0000            140   _SM0            BIT 0x9f
0000            141   _P2_0           BIT 0xa0
0000            142   _P2_1           BIT 0xa1
0000            143   _P2_2           BIT 0xa2
0000            144   _P2_3           BIT 0xa3
0000            145   _P2_4           BIT 0xa4
0000            146   _P2_5           BIT 0xa5
0000            147   _P2_6           BIT 0xa6
0000            148   _P2_7           BIT 0xa7
0000            149   _EX0            BIT 0xa8
0000            150   _ET0            BIT 0xa9
0000            151   _EX1            BIT 0xaa
0000            152   _ET1            BIT 0xab
0000            153   _ES             BIT 0xac
0000            154   _ET2            BIT 0xad
0000            155   _EA             BIT 0xaf
0000            156   _P3_0           BIT 0xb0
0000            157   _P3_1           BIT 0xb1
0000            158   _P3_2           BIT 0xb2
0000            159   _P3_3           BIT 0xb3
0000            160   _P3_4           BIT 0xb4
0000            161   _P3_5           BIT 0xb5
0000            162   _P3_6           BIT 0xb6
0000            163   _P3_7           BIT 0xb7
0000            164   _RXD            BIT 0xb0
0000            165   _TXD            BIT 0xb1
0000            166   _INT0           BIT 0xb2
0000            167   _INT1           BIT 0xb3
0000            168   _T0             BIT 0xb4
0000            169   _T1             BIT 0xb5
0000            170   _WR             BIT 0xb6
0000            171   _RD             BIT 0xb7
0000            172   _PX0            BIT 0xb8
0000            173   _PT0            BIT 0xb9
0000            174   _PX1            BIT 0xba
0000            175   _PT1            BIT 0xbb
0000            176   _PS             BIT 0xbc
0000            177   _PT2            BIT 0xbd
0000            178   _P              BIT 0xd0
0000            179   _F1             BIT 0xd1
0000            180   _OV             BIT 0xd2
0000            181   _RS0            BIT 0xd3
0000            182   _RS1            BIT 0xd4
0000            183   _F0             BIT 0xd5
0000            184   _AC             BIT 0xd6
0000            185   _CY             BIT 0xd7
0000            186   _T2CON_0        BIT 0xc8
0000            187   _T2CON_1        BIT 0xc9
0000            188   _T2CON_2        BIT 0xca
0000            189   _T2CON_3        BIT 0xcb
0000            190   _T2CON_4        BIT 0xcc
0000            191   _T2CON_5        BIT 0xcd
0000            192   _T2CON_6        BIT 0xce
0000            193   _T2CON_7        BIT 0xcf
0000            194   _CP_RL2         BIT 0xc8
0000            195   _C_T2           BIT 0xc9
0000            196   _TR2            BIT 0xca
0000            197   _EXEN2          BIT 0xcb
0000            198   _TCLK           BIT 0xcc
0000            199   _RCLK           BIT 0xcd
0000            200   _EXF2           BIT 0xce
0000            201   _TF2            BIT 0xcf
0000            202   _LEDRA_0        BIT 0xe8
0000            203   _LEDRA_1        BIT 0xe9
0000            204   _LEDRA_2        BIT 0xea
0000            205   _LEDRA_3        BIT 0xeb
0000            206   _LEDRA_4        BIT 0xec
0000            207   _LEDRA_5        BIT 0xed
0000            208   _LEDRA_6        BIT 0xee
0000            209   _LEDRA_7        BIT 0xef
0000            210   _SWA_0          BIT 0xe8
0000            211   _SWA_1          BIT 0xe9
0000            212   _SWA_2          BIT 0xea
0000            213   _SWA_3          BIT 0xeb
0000            214   _SWA_4          BIT 0xec
0000            215   _SWA_5          BIT 0xed
0000            216   _SWA_6          BIT 0xee
0000            217   _SWA_7          BIT 0xef
0000            218   _KEY_0          BIT 0xf8
0000            219   _KEY_1          BIT 0xf9
0000            220   _KEY_2          BIT 0xfa
0000            221   _KEY_3          BIT 0xfb
0000            222   _LCD_RW         BIT 0xd8
0000            223   _LCD_EN         BIT 0xd9
0000            224   _LCD_RS         BIT 0xda
0000            225   _LCD_ON         BIT 0xdb
0000            226   _LCD_BLON       BIT 0xdc
0000            227   _JRXRDY         BIT 0xc0
0000            228   _JTXRDY         BIT 0xc1
0000            229   _JRXEN          BIT 0xc2
0000            230   _JTXEN          BIT 0xc3
0000            231   _JTXFULL        BIT 0xc4
0000            232   _JRXFULL        BIT 0xc5
0000            233   _JTXEMPTY       BIT 0xc6
0000            234   _JTDI           BIT 0xc7
0000            235   _LTC2308_MISO   BIT 0xf8
0000            236   _LTC2308_MOSI   BIT 0xf9
0000            237   _LTC2308_SCLK   BIT 0xfa
0000            238   _LTC2308_EN_N   BIT 0xfb
0000            239   ;--------------------------------------------------------
0000            240   ; overlayable register banks
0000            241   ;--------------------------------------------------------
0000            242            rbank0 segment data overlay
0000            243   ;--------------------------------------------------------
0000            244   ; internal ram data
0000            245   ;--------------------------------------------------------
0000            246            rseg R_DSEG
0000            247   _DisplayFloat_buff_1_50:
0000            248            ds 6
0006            249   ;--------------------------------------------------------
0006            250   ; overlayable items in internal ram 
0006            251   ;--------------------------------------------------------
0000            252            rseg    R_OSEG
0000            253   ;--------------------------------------------------------
0000            254   ; indirectly addressable internal ram data
0000            255   ;--------------------------------------------------------
0000            256            rseg R_ISEG
0000            257   ;--------------------------------------------------------
0000            258   ; absolute internal ram data
0000            259   ;--------------------------------------------------------
0000            260            DSEG
0000            261   ;--------------------------------------------------------
0000            262   ; bit data
0000            263   ;--------------------------------------------------------
0000            264            rseg R_BSEG
0000            265   ;--------------------------------------------------------
0000            266   ; paged external ram data
0000            267   ;--------------------------------------------------------
0000            268            rseg R_PSEG
0000            269   ;--------------------------------------------------------
0000            270   ; external ram data
0000            271   ;--------------------------------------------------------
0000            272            rseg R_XSEG
0000            273   ;--------------------------------------------------------
0000            274   ; absolute external ram data
0000            275   ;--------------------------------------------------------
0000            276            XSEG
0000            277   ;--------------------------------------------------------
0000            278   ; external initialized ram data
0000            279   ;--------------------------------------------------------
0000            280            rseg R_IXSEG
0000            281            rseg R_HOME
0000            282            rseg R_GSINIT
0000            283            rseg R_CSEG
0000            284   ;--------------------------------------------------------
0000            285   ; Reset entry point and interrupt vectors
0000            286   ;--------------------------------------------------------
0000            287            CSEG at 0x0000
0000 020100     288            ljmp    _crt0
0003            289   ;--------------------------------------------------------
0003            290   ; global & static initialisations
0003            291   ;--------------------------------------------------------
0000            292            rseg R_HOME
0000            293            rseg R_GSINIT
0000            294            rseg R_GSINIT
0000            295   ;--------------------------------------------------------
0000            296   ; data variables initialization
0000            297   ;--------------------------------------------------------
0000            298            rseg R_DINIT
0000            299            ; The linker places a 'ret' at the end of segment R_DINIT.
0000            300   ;--------------------------------------------------------
0000            301   ; code
0000            302   ;--------------------------------------------------------
0000            303            rseg R_CSEG
0000            304   ;------------------------------------------------------------
0000            305   ;Allocation info for local variables in function 'de2_8052_crt0'
0000            306   ;------------------------------------------------------------
0000            307   ;------------------------------------------------------------
0000            308   ;        C:/Source/call51/Bin/../include/mcs51/CV_8052.h:303: void de2_8052_crt0 (void) _naked
0000            309   ;        -----------------------------------------
0000            310   ;         function de2_8052_crt0
0000            311   ;        -----------------------------------------
0000            312   _de2_8052_crt0:
0000            313   ;        naked function: no prologue.
0000            314   ;        C:/Source/call51/Bin/../include/mcs51/CV_8052.h:372: _endasm;
0000            315            
0000            316            
0000            317             rseg R_GSINIT
0000            318             public _crt0
0000            319            _crt0:
0000 7581FF     320             mov sp,#_stack_start-1
0003 120100     321             lcall __c51_external_startup
0006 E582       322             mov a,dpl
0008 6001       323             jz __c51_init_data
000A 020100     324             ljmp __c51_program_startup
000D            325            __c51_init_data:
000D            326            
000D            327   ; Initialize xdata variables
000D            328            
000D 758200     329             mov dpl, #_R_XINIT_start
0010 758300     330             mov dph, #(_R_XINIT_start>>8)
0013 758400     331             mov _DPL1, #_R_IXSEG_start
0016 758500     332             mov _DPH1, #(_R_IXSEG_start>>8)
0019 7800       333             mov r0, #_R_IXSEG_size
001B 7900       334             mov r1, #(_R_IXSEG_size>>8)
001D            335            
001D            336            XInitLoop?repeat?:
001D E8         337             mov a, r0
001E 49         338             orl a, r1
001F 6001       339             jz XInitLoop?done?
0021 E4         340             clr a
0022 758600     341             mov _DPS, #0 ; Using dpl, dph
0025 93         342             movc a,@a+dptr
0026 A3         343             inc dptr
0027 758601     344             mov _DPS, #1 ; Using DPL1, DPH1
002A F0         345             movx @dptr, a
002B A3         346             inc dptr
002C 18         347             dec r0
002D B8FFF0     348             cjne r0, #0xff, XInitLoop?repeat?
0030 19         349             dec r1
0031 8001       350             sjmp XInitLoop?repeat?
0033            351            
0033            352            XInitLoop?done?:
0033            353            
0033            354   ; Clear xdata variables
0033 758600     355             mov _DPS, #0 ; Make sure we are using dpl, dph
0036 758200     356             mov dpl, #_R_XSEG_start
0039 758300     357             mov dph, #(_R_XSEG_start>>8)
003C 7C00       358             mov r4, #_R_XSEG_size
003E 7D00       359             mov r5, #(_R_XSEG_size>>8)
0040            360            
0040            361            XClearLoop?repeat?:
0040 EC         362             mov a, r4
0041 4D         363             orl a, r5
0042 6001       364             jz XClearLoop?done?
0044 E4         365             clr a
0045 F0         366             movx @dptr, a
0046 A3         367             inc dptr
0047 1C         368             dec r4
0048 BCFF00     369             cjne r4, #0xff, XClearLoop?repeat?
004B 1D         370             dec r5
004C 8001       371             sjmp XClearLoop?repeat?
004E            372            
004E            373            XClearLoop?done?:
004E 120100     374             lcall _R_DINIT_start ; Initialize data/idata variables
0051            375            
0051            376            __c51_program_startup:
0051 120100     377             lcall _main
0054            378            
0054            379            forever?home?:
0054 8001       380             sjmp forever?home?
0056            381            
0056            382             
0056            383   ;        naked function: no epilogue.
0056            384   ;------------------------------------------------------------
0056            385   ;Allocation info for local variables in function '_c51_external_startup'
0056            386   ;------------------------------------------------------------
0056            387   ;------------------------------------------------------------
0056            388   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:21: unsigned char _c51_external_startup(void)
0056            389   ;        -----------------------------------------
0056            390   ;         function _c51_external_startup
0056            391   ;        -----------------------------------------
0056            392   __c51_external_startup:
0056            393            using   0
0056            394   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:23: setbaud_timer2(TIMER_2_RELOAD);
0056 90FFF7     395            mov     dptr,#0xFFF7
0059 120100     396            lcall   _setbaud_timer2
005C            397   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:25: LEDRA=0x00;
005C 75E800     398            mov     _LEDRA,#0x00
005F            399   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:26: LEDRB=0x00;
005F 759500     400            mov     _LEDRB,#0x00
0062            401   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:29: LTC2308_MOSI=0;
0062 C2F9       402            clr     _LTC2308_MOSI
0064            403   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:30: LTC2308_SCLK=0;
0064 C2FA       404            clr     _LTC2308_SCLK
0066            405   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:31: LTC2308_EN_N=1;
0066 D2FB       406            setb    _LTC2308_EN_N
0068            407   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:33: return 0;
0068 758200     408            mov     dpl,#0x00
006B 22         409            ret
006C            410   ;------------------------------------------------------------
006C            411   ;Allocation info for local variables in function 'LTC2308RW'
006C            412   ;------------------------------------------------------------
006C            413   ;x                         Allocated to registers r2 r3 
006C            414   ;i                         Allocated to registers r4 
006C            415   ;------------------------------------------------------------
006C            416   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:37: unsigned int LTC2308RW (unsigned int x)
006C            417   ;        -----------------------------------------
006C            418   ;         function LTC2308RW
006C            419   ;        -----------------------------------------
006C            420   _LTC2308RW:
006C AA82       421            mov     r2,dpl
006E AB83       422            mov     r3,dph
0070            423   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:40: LTC2308_EN_N=0;
0070 C2FB       424            clr     _LTC2308_EN_N
0072            425   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:41: do {
0072 7C0C       426            mov     r4,#0x0C
0074            427   L004003?:
0074            428   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:42: LTC2308_MOSI = x & 0x800;
0074 EB         429            mov     a,r3
0075 A2E3       430            mov     c,acc.3
0077 92F9       431            mov     _LTC2308_MOSI,c
0079            432   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:43: LTC2308_SCLK = 1;
0079 D2FA       433            setb    _LTC2308_SCLK
007B            434   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:44: x <<= 1;
007B EB         435            mov     a,r3
007C CA         436            xch     a,r2
007D 25E0       437            add     a,acc
007F CA         438            xch     a,r2
0080 33         439            rlc     a
0081 FB         440            mov     r3,a
0082            441   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:45: if(LTC2308_MISO) x += 1; 
0082 30F8D0     442            jnb     _LTC2308_MISO,L004002?
0085 0A         443            inc     r2
0086 BA0010     444            cjne    r2,#0x00,L004013?
0089 0B         445            inc     r3
008A            446   L004013?:
008A            447   L004002?:
008A            448   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:46: LTC2308_SCLK = 0;
008A C2FA       449            clr     _LTC2308_SCLK
008C            450   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:47: } while(--i);
008C DC50       451            djnz    r4,L004003?
008E            452   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:48: LTC2308_EN_N=1; // Start conversion for next reading
008E D2FB       453            setb    _LTC2308_EN_N
0090            454   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:49: return (x&0xfff);
0090 8A82       455            mov     dpl,r2
0092 740F       456            mov     a,#0x0F
0094 5B         457            anl     a,r3
0095 F583       458            mov     dph,a
0097 22         459            ret
0098            460   ;------------------------------------------------------------
0098            461   ;Allocation info for local variables in function 'DisplayFloat'
0098            462   ;------------------------------------------------------------
0098            463   ;v                         Allocated to registers r2 r3 r4 r5 
0098            464   ;buff                      Allocated with name '_DisplayFloat_buff_1_50'
0098            465   ;------------------------------------------------------------
0098            466   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:54: void DisplayFloat (float v)
0098            467   ;        -----------------------------------------
0098            468   ;         function DisplayFloat
0098            469   ;        -----------------------------------------
0098            470   _DisplayFloat:
0098 AA82       471            mov     r2,dpl
009A AB83       472            mov     r3,dph
009C ACF0       473            mov     r4,b
009E FD         474            mov     r5,a
009F            475   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:57: sprintf(buff, "%5.3f", v);
009F C002       476            push    ar2
00A1 C003       477            push    ar3
00A3 C004       478            push    ar4
00A5 C005       479            push    ar5
00A7 7490       480            mov     a,#__str_0
00A9 C0E0       481            push    acc
00AB 7480       482            mov     a,#(__str_0 >> 8)
00AD C0E0       483            push    acc
00AF 7480       484            mov     a,#0x80
00B1 C0E0       485            push    acc
00B3 7410       486            mov     a,#_DisplayFloat_buff_1_50
00B5 C0E0       487            push    acc
00B7 747A       488            mov     a,#(_DisplayFloat_buff_1_50 >> 8)
00B9 C0E0       489            push    acc
00BB 7440       490            mov     a,#0x40
00BD C0E0       491            push    acc
00BF 120100     492            lcall   _sprintf
00C2 E581       493            mov     a,sp
00C4 24F6       494            add     a,#0xf6
00C6 F581       495            mov     sp,a
00C8            496   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:58: HEX3=SevenSeg[buff[0]-'0'];
00C8 E510       497            mov     a,_DisplayFloat_buff_1_50
00CA 24D0       498            add     a,#0xd0
00CC 901A88     499            mov     dptr,#_SevenSeg
00CF 93         500            movc    a,@a+dptr
00D0 F594       501            mov     _HEX3,a
00D2            502   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:59: HEX2=SevenSeg[buff[2]-'0'];
00D2 E512       503            mov     a,(_DisplayFloat_buff_1_50 + 0x0002)
00D4 24D0       504            add     a,#0xd0
00D6 901A88     505            mov     dptr,#_SevenSeg
00D9 93         506            movc    a,@a+dptr
00DA F593       507            mov     _HEX2,a
00DC            508   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:60: HEX1=SevenSeg[buff[3]-'0'];
00DC E513       509            mov     a,(_DisplayFloat_buff_1_50 + 0x0003)
00DE 24D0       510            add     a,#0xd0
00E0 901A88     511            mov     dptr,#_SevenSeg
00E3 93         512            movc    a,@a+dptr
00E4 F592       513            mov     _HEX1,a
00E6            514   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:61: HEX0=SevenSeg[buff[4]-'0'];
00E6 E514       515            mov     a,(_DisplayFloat_buff_1_50 + 0x0004)
00E8 24D0       516            add     a,#0xd0
00EA 901A88     517            mov     dptr,#_SevenSeg
00ED 93         518            movc    a,@a+dptr
00EE F591       519            mov     _HEX0,a
00F0 22         520            ret
00F1            521   ;------------------------------------------------------------
00F1            522   ;Allocation info for local variables in function 'Wait1ms'
00F1            523   ;------------------------------------------------------------
00F1            524   ;------------------------------------------------------------
00F1            525   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:64: void Wait1ms (void)
00F1            526   ;        -----------------------------------------
00F1            527   ;         function Wait1ms
00F1            528   ;        -----------------------------------------
00F1            529   _Wait1ms:
00F1            530   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:66: TR0=0;
00F1 C28C       531            clr     _TR0
00F3            532   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:67: TMOD=(TMOD &0xf0)|0x01; // Timer 0: GATE=0, C/T*=0, M1=0, M0=1: 16-bit timer
00F3 74F0       533            mov     a,#0xF0
00F5 5589       534            anl     a,_TMOD
00F7 4401       535            orl     a,#0x01
00F9 F589       536            mov     _TMOD,a
00FB            537   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:68: TH0=HIGH(TIMER_0_1ms);
00FB 758CF5     538            mov     _TH0,#0xF5
00FE            539   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:69: TL0=LOW(TIMER_0_1ms);
00FE 758A27     540            mov     _TL0,#0x27
0101            541   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:70: TF0=0;
0101 C28D       542            clr     _TF0
0103            543   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:71: TR0=1;
0103 D28C       544            setb    _TR0
0105            545   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:72: while(TF0==0);
0105            546   L006001?:
0105 308D10     547            jnb     _TF0,L006001?
0108            548   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:73: TR0=0;
0108 C28C       549            clr     _TR0
010A 22         550            ret
010B            551   ;------------------------------------------------------------
010B            552   ;Allocation info for local variables in function 'MyDelay'
010B            553   ;------------------------------------------------------------
010B            554   ;msec                      Allocated to registers r2 r3 
010B            555   ;------------------------------------------------------------
010B            556   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:76: void MyDelay (unsigned int msec)
010B            557   ;        -----------------------------------------
010B            558   ;         function MyDelay
010B            559   ;        -----------------------------------------
010B            560   _MyDelay:
010B AA82       561            mov     r2,dpl
010D AB83       562            mov     r3,dph
010F            563   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:78: do {
010F            564   L007001?:
010F            565   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:79: Wait1ms();
010F C002       566            push    ar2
0111 C003       567            push    ar3
0113 120100     568            lcall   _Wait1ms
0116 D003       569            pop     ar3
0118 D002       570            pop     ar2
011A            571   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:80: } while (--msec);
011A 1A         572            dec     r2
011B BAFF90     573            cjne    r2,#0xff,L007008?
011E 1B         574            dec     r3
011F            575   L007008?:
011F EA         576            mov     a,r2
0120 4B         577            orl     a,r3
0121 7001       578            jnz     L007001?
0123 22         579            ret
0124            580   ;------------------------------------------------------------
0124            581   ;Allocation info for local variables in function 'main'
0124            582   ;------------------------------------------------------------
0124            583   ;val                       Allocated to registers r2 r3 
0124            584   ;v                         Allocated to registers r4 r5 r6 r7 
0124            585   ;------------------------------------------------------------
0124            586   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:83: void main(void)
0124            587   ;        -----------------------------------------
0124            588   ;         function main
0124            589   ;        -----------------------------------------
0124            590   _main:
0124            591   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:88: printf("\x1b[2J"); // Clear screen using ANSI escape sequence.
0124 74D0       592            mov     a,#__str_1
0126 C0E0       593            push    acc
0128 7481       594            mov     a,#(__str_1 >> 8)
012A C0E0       595            push    acc
012C 7480       596            mov     a,#0x80
012E C0E0       597            push    acc
0130 120100     598            lcall   _printf
0133 1581       599            dec     sp
0135 1581       600            dec     sp
0137 1581       601            dec     sp
0139            602   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:90: printf("CV-8052 test program for the LTC2308 in the DE1-SoC\r\n");
0139 7450       603            mov     a,#__str_2
013B C0E0       604            push    acc
013D 7482       605            mov     a,#(__str_2 >> 8)
013F C0E0       606            push    acc
0141 7480       607            mov     a,#0x80
0143 C0E0       608            push    acc
0145 120100     609            lcall   _printf
0148 1581       610            dec     sp
014A 1581       611            dec     sp
014C 1581       612            dec     sp
014E            613   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:92: while (1)
014E            614   L008011?:
014E            615   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:103: val=0b_100010_000000;
014E 7A80       616            mov     r2,#0x80
0150 7B08       617            mov     r3,#0x08
0152            618   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:107: switch (SWA & 0b_111) // Select channel using the switches
0152 7407       619            mov     a,#0x07
0154 55E8       620            anl     a,_SWA
0156 FC         621            mov  r4,a
0157 24F8       622            add     a,#0xff - 0x07
0159 4001       623            jc      L008009?
015B EC         624            mov     a,r4
015C 2C         625            add     a,r4
015D 2C         626            add     a,r4
015E 908310     627            mov     dptr,#L008018?
0161 73         628            jmp     @a+dptr
0162            629   L008018?:
0162 020100     630            ljmp    L008001?
0165 020100     631            ljmp    L008002?
0168 020100     632            ljmp    L008003?
016B 020100     633            ljmp    L008004?
016E 020100     634            ljmp    L008005?
0171 020100     635            ljmp    L008006?
0174 020100     636            ljmp    L008007?
0177 020100     637            ljmp    L008008?
017A            638   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:109: case 0: val|=0b_0_000_00000000; break;
017A            639   L008001?:
017A 7A80       640            mov     r2,#0x80
017C 7B08       641            mov     r3,#0x08
017E            642   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:110: case 1: val|=0b_0_100_00000000; break;
017E 8001       643            sjmp    L008009?
0180            644   L008002?:
0180 7A80       645            mov     r2,#0x80
0182 7B0C       646            mov     r3,#0x0C
0184            647   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:111: case 2: val|=0b_0_001_00000000; break;
0184 8001       648            sjmp    L008009?
0186            649   L008003?:
0186 7A80       650            mov     r2,#0x80
0188 7B09       651            mov     r3,#0x09
018A            652   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:112: case 3: val|=0b_0_101_00000000; break;
018A 8001       653            sjmp    L008009?
018C            654   L008004?:
018C 7A80       655            mov     r2,#0x80
018E 7B0D       656            mov     r3,#0x0D
0190            657   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:113: case 4: val|=0b_0_010_00000000; break;
0190 8001       658            sjmp    L008009?
0192            659   L008005?:
0192 7A80       660            mov     r2,#0x80
0194 7B0A       661            mov     r3,#0x0A
0196            662   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:114: case 5: val|=0b_0_110_00000000; break;
0196 8001       663            sjmp    L008009?
0198            664   L008006?:
0198 7A80       665            mov     r2,#0x80
019A 7B0E       666            mov     r3,#0x0E
019C            667   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:115: case 6: val|=0b_0_011_00000000; break;
019C 8001       668            sjmp    L008009?
019E            669   L008007?:
019E 7A80       670            mov     r2,#0x80
01A0 7B0B       671            mov     r3,#0x0B
01A2            672   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:116: case 7: val|=0b_0_111_00000000; break;
01A2 8001       673            sjmp    L008009?
01A4            674   L008008?:
01A4 7A80       675            mov     r2,#0x80
01A6 7B0F       676            mov     r3,#0x0F
01A8            677   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:117: }
01A8            678   L008009?:
01A8            679   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:118: val=LTC2308RW(val);
01A8 8A82       680            mov     dpl,r2
01AA 8B83       681            mov     dph,r3
01AC 120100     682            lcall   _LTC2308RW
01AF            683   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:119: v=val/1000.0; // faster version of v=(val*4.096)/4096.0;
01AF AA82       684            mov     r2,dpl
01B1 AB83       685            mov  r3,dph
01B3 C002       686            push    ar2
01B5 C003       687            push    ar3
01B7 120100     688            lcall   ___uint2fs
01BA AC82       689            mov     r4,dpl
01BC AD83       690            mov     r5,dph
01BE AEF0       691            mov     r6,b
01C0 FF         692            mov     r7,a
01C1 E4         693            clr     a
01C2 C0E0       694            push    acc
01C4 C0E0       695            push    acc
01C6 747A       696            mov     a,#0x7A
01C8 C0E0       697            push    acc
01CA 7444       698            mov     a,#0x44
01CC C0E0       699            push    acc
01CE 8C82       700            mov     dpl,r4
01D0 8D83       701            mov     dph,r5
01D2 8EF0       702            mov     b,r6
01D4 EF         703            mov     a,r7
01D5 120100     704            lcall   ___fsdiv
01D8 AC82       705            mov     r4,dpl
01DA AD83       706            mov     r5,dph
01DC AEF0       707            mov     r6,b
01DE FF         708            mov     r7,a
01DF E581       709            mov     a,sp
01E1 24FC       710            add     a,#0xfc
01E3 F581       711            mov     sp,a
01E5 D003       712            pop     ar3
01E7 D002       713            pop     ar2
01E9            714   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:120: printf("val[%d]=0x%04x, V=%5.3f\r", SWA & 0b_111, val, v);
01E9 7407       715            mov     a,#0x07
01EB 55E8       716            anl     a,_SWA
01ED F8         717            mov     r0,a
01EE 7900       718            mov     r1,#0x00
01F0 C004       719            push    ar4
01F2 C005       720            push    ar5
01F4 C006       721            push    ar6
01F6 C007       722            push    ar7
01F8 C004       723            push    ar4
01FA C005       724            push    ar5
01FC C006       725            push    ar6
01FE C007       726            push    ar7
0200 C002       727            push    ar2
0202 C003       728            push    ar3
0204 C000       729            push    ar0
0206 C001       730            push    ar1
0208 74D0       731            mov     a,#__str_3
020A C0E0       732            push    acc
020C 7485       733            mov     a,#(__str_3 >> 8)
020E C0E0       734            push    acc
0210 7480       735            mov     a,#0x80
0212 C0E0       736            push    acc
0214 120100     737            lcall   _printf
0217 E581       738            mov     a,sp
0219 24F5       739            add     a,#0xf5
021B F581       740            mov     sp,a
021D D007       741            pop     ar7
021F D006       742            pop     ar6
0221 D005       743            pop     ar5
0223 D004       744            pop     ar4
0225            745   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:121: DisplayFloat(v);
0225 8C82       746            mov     dpl,r4
0227 8D83       747            mov     dph,r5
0229 8EF0       748            mov     b,r6
022B EF         749            mov     a,r7
022C 120100     750            lcall   _DisplayFloat
022F            751   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:122: HEX5=SevenSeg[SWA & 0b_111]; // Display the channel number
022F 7407       752            mov     a,#0x07
0231 55E8       753            anl     a,_SWA
0233 901A88     754            mov     dptr,#_SevenSeg
0236 93         755            movc    a,@a+dptr
0237 F58F       756            mov     _HEX5,a
0239            757   ;        C:\Source\SOC_8052\ADC_Test\LTC2308_test.c:123: MyDelay(500);
0239 9001F4     758            mov     dptr,#0x01F4
023C 120100     759            lcall   _MyDelay
023F 020100     760            ljmp    L008011?
0000            761            rseg R_CSEG
0000            762   
0000            763            rseg R_XINIT
0000            764   
0000            765            rseg R_CONST
0000            766   _SevenSeg:
0000 C0         767            db 0xc0         ; 192
0001 F9         768            db 0xf9         ; 249
0002 A4         769            db 0xa4         ; 164
0003 B0         770            db 0xb0         ; 176
0004 99         771            db 0x99         ; 153
0005 92         772            db 0x92         ; 146
0006 82         773            db 0x82         ; 130
0007 F8         774            db 0xf8         ; 248
0008 80         775            db 0x80         ; 128
0009 90         776            db 0x90         ; 144
000A            777   __str_0:
000A 25352E33   778            db '%5.3f'
     66
000F 00         779            db 0x00
0010            780   __str_1:
0010 1B         781            db 0x1B
0011 5B324A     782            db '[2J'
0014 00         783            db 0x00
0015            784   __str_2:
0015 43562D38   785            db 'CV-8052 test program for the LTC2308 in the DE1-SoC'
     30353220
     74657374
     2070726F
     6772616D
     20666F72
     20746865
     204C5443
     32333038
     20696E20
     74686520
     4445312D
     536F43
0048 0D         786            db 0x0D
0049 0A         787            db 0x0A
004A 00         788            db 0x00
004B            789   __str_3:
004B 76616C5B   790            db 'val[%d]=0x%04x, V=%5.3f'
     25645D3D
     30782530
     34782C20
     563D2535
     2E3366
0062 0D         791            db 0x0D
0063 00         792            db 0x00
0064            793   
0003            794            CSEG
0003            795   
0003            796   end
